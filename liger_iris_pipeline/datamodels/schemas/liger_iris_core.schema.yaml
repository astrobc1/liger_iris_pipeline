%YAML 1.1
---
$schema: "http://stsci.edu/schemas/fits-schema/fits-schema"
id: "https://oirlab.github.io/schemas/liger_iris_core.schema"
type: object
properties:
  meta:
    type: object
    properties:
      date:
        title: "UTC date file created"
        type: string
        fits_keyword: DATE
        blend_table: True
      origin:
        title: Organization responsible for creating file
        type: string
        fits_keyword: ORIGIN
        blend_table: True
      time_sys:
        title: principal time system for time-related keywords
        type: string
        fits_keyword: TIMESYS
        blend_table: True
      time_unit:
        title: Default unit applicable to all time values
        type: string
        default: 's'
        fits_keyword: TIMEUNIT
      filename:
        title: Name of the file
        type: string
        fits_keyword: FILENAME
        blend_table: True
      filetype:
        title: Type of data in the file
        type: string
        fits_keyword: FILETYPE
        blend_table: True
      model_type:
        title: Type of data model
        type: string
        fits_keyword: DATAMODL
        blend_table: True
      telescope:
        title: Telescope used to acquire the data
        type: string
        fits_keyword: TELESCOP
        blend_table: True
      asn:
        title: Association information
        type: object
        properties:
          pool_name:
            title: Name of the ASN pool
            type: string
            fits_keyword: ASNPOOL
            blend_table: True
          table_name:
            title: Name of the ASN table
            type: string
            fits_keyword: ASNTABLE
            blend_table: True
          exptype:
            title: Exposure type provided for this exposure in the association
            type: string
            default: 'science'
      program:
        title: Program information
        type: object
        properties:
          title:
            title: Proposal title
            type: string
            fits_keyword: TITLE
            blend_table: True
          pi_name:
            title: Principal investigator name
            type: string
            fits_keyword: PI_NAME
            blend_table: True
          category:
            title: Program category
            type: string
            fits_keyword: CATEGORY
            blend_table: True
          sub_category:
            title: Program sub-category
            type: string
            fits_keyword: SUBCAT
            blend_table: True
          science_category:
            title: Science category assigned during TAC process
            type: string
            fits_keyword: SCICAT
            blend_table: True
          continuation_id:
            title: Continuation of previous program
            type: integer
            fits_keyword: CONT_ID
            blend_table: True
      instrument:
        title: Instrument configuration information
        type: object
        properties:
          name:
            title: Instrument used to acquire the data
            type: string
            enum: [IRIS, LIGER, ANY, N/A]
            fits_keyword: INSTRUME
            blend_table: True
          detector:
            title: Name of detector used to acquire the data
            type: string
            enum: [IRIS1, LIGER1, N/A]
            fits_keyword: DETECTOR
            blend_table: True
          filter:
            title: Name of the filter element used
            type: string
            enum: [ANY, N/A, K, KN3, MULTIPLE]
            fits_keyword: FILTER
            blend_table: True
            blend_rule: multi
          pupil:
            title: Name of the pupil element used
            type: string
            enum: [ANY, CLEAR, N/A]
            fits_keyword: PUPIL
            blend_table: True
          pupil_imaging_lens:
            title: Pupil imaging lens in the optical path?
            type: boolean
            fits_keyword: PILIN
            blend_table: True
          grating:
            title: Name of the grating element used
            type: string
            enum: [MIRROR, N/A, ANY, UNKNOWN, MULTIPLE]
            fits_keyword: GRATING
            blend_table: True
            blend_rule: multi
      exposure:
        title: Exposure parameters
        type: object
        properties:
          count:
            title: Running count of exposures in visit
            type: integer
            fits_keyword: EXPCOUNT
            blend_table: True
          prime_parallel:
            title: Prime or parallel exposure
            type: string
            enum: [PRIME, PARALLEL_COORDINATED, PARALLEL_PURE]
            fits_keyword: EXPRIPAR
            blend_table: True
          type:
            title: Type of data in the exposure
            type: string
            enum:
             [
              # IRIS
              IRIS_IMAGE,
              LIGER_IMAGE,
              # Misc
              N/A, ANY]
            fits_keyword: EXP_TYPE
            blend_table: True
          start_time:
            allOf:
              - type: number
              - fits_keyword: EXPSTART
                title: UTC exposure start time
                blend_table: True
                blend_rule: first
          mid_time:
            allOf:
              - type: number
              - fits_keyword: EXPMID
                title: UTC exposure mid time
                blend_table: True
                blend_rule: mean
          end_time:
            allOf:
              - type: number
                title: UTC exposure end time
                fits_keyword: EXPEND
                blend_table: True
                blend_rule: last
          readpatt:
            title: Readout pattern
            type: string
            enum: [ACQ1, ACQ2, BRIGHT1, BRIGHT2,
              DEEP2, DEEP8, FAST, FASTGRPAVG,
              FGS, FGS60, FGS8370, FGS840, FGSRAPID, FINEGUIDE,
              ID, MEDIUM2, MEDIUM8, NIS, NISRAPID,
              NRS, NRSIRS2, NRSN16R4, NRSN32R8, NRSN8R2,
              NRSRAPID, NRSIRS2RAPID, NRSSLOW, RAPID,
              SHALLOW2, SHALLOW4, SLOW, TRACK, ANY, N/A]
            fits_keyword: READPATT
            blend_table: True
          segment_number:
            title: Sequential segment number
            type: integer
            fits_keyword: EXSEGNUM
            blend_table: True
            blend_rule: first
          segment_total:
            title: Total number of segments
            type: integer
            fits_keyword: EXSEGTOT
            blend_table: True
          noutputs:
            title: Number of detector outputs used
            type: integer
            enum: [1, 4]
            fits_keyword: NOUTPUTS
            blend_table: True
          nints:
            title: Number of integrations in exposure
            type: integer
            fits_keyword: NINTS
            blend_table: True
          integration_start:
            title: Starting integration number in this segment
            type: integer
            fits_keyword: INTSTART
            blend_table: True
            blend_rule: min
          integration_end:
            title: Ending integration number in this segment
            type: integer
            fits_keyword: INTEND
            blend_table: True
            blend_rule: max
          ngroups:
            title: Number of groups in integration
            type: integer
            fits_keyword: NGROUPS
            blend_table: True
          nframes:
            title: Number of frames per group
            type: integer
            fits_keyword: NFRAMES
            blend_table: True
          nsamples:
            title: Number of A/D samples per pixel
            type: integer
            fits_keyword: NSAMPLES
            blend_table: True
          sample_time:
            title: "[us] Time between samples"
            type: number
            fits_keyword: TSAMPLE
            blend_table: True
          frame_time:
            title: "[s] Time between frames"
            type: number
            fits_keyword: TFRAME
            blend_table: True
          group_time:
            title: "[s] Time between groups"
            type: number
            fits_keyword: TGROUP
            blend_table: True
          integration_time:
            title: "[s] Effective integration time"
            type: number
            fits_keyword: EFFINTTM
            blend_table: True
          exposure_time:
            title: "[s] Effective exposure time"
            type: number
            fits_keyword: EFFEXPTM
            blend_rule: sum
            blend_table: True
          duration:
            title: "[s] Total duration of exposure"
            type: number
            fits_keyword: DURATION
            blend_rule: sum
            blend_table: True
          nresets_at_start:
            title: Number of resets at start of exposure
            type: integer
            fits_keyword: NRSTSTRT
            blend_table: True
          nresets_between_ints:
            title: Number of resets between integrations
            type: integer
            fits_keyword: NRESETS
            blend_table: True
          zero_frame:
            title: Zero frame was downlinked separately
            type: boolean
            fits_keyword: ZEROFRAM
            blend_table: True
          data_problem:
            title: Science telemetry indicated a problem
            type: boolean
            fits_keyword: DATAPROB
            blend_table: True
          sca_num:
            title: Sensor Chip Assembly number
            type: integer
            fits_keyword: SCA_NUM
            blend_table: True
          datamode:
            title: post-processing method used in FPAP
            type: integer
            fits_keyword: DATAMODE
            blend_table: True
          gain_factor:
            title: Gain scale factor
            type: number
            fits_keyword: GAINFACT
            blend_table: True
      subarray:
        title: Subarray parameters
        type: object
        properties:
          name:
            title: Subarray used
            type: string
            # Values grouped by instrument:
            anyOf:
              # All
              - enum:
                  [FULL, CUSTOM, GENERIC, N/A]
            fits_keyword: SUBARRAY
            blend_table: True
          id:
            title: Subarray ID, 0 is full
            type: integer
            fits_keyword: SUBARRID
            blend_table: True
          xstart:
            title: Starting pixel in axis 1 direction
            type: integer
            fits_keyword: SUBSTRT1
            blend_table: True
          ystart:
            title: Starting pixel in axis 2 direction
            type: integer
            fits_keyword: SUBSTRT2
            blend_table: True
          xsize:
            title: Number of pixels in axis 1 direction
            type: integer
            fits_keyword: SUBSIZE1
            blend_table: True
          ysize:
            title: Number of pixels in axis 2 direction
            type: integer
            fits_keyword: SUBSIZE2
            blend_table: True
          fastaxis:
            title: Fast readout axis direction
            type: integer
            fits_keyword: FASTAXIS
            blend_table: True
          slowaxis:
            title: Slow readout axis direction
            type: integer
            fits_keyword: SLOWAXIS
            blend_table: True
          detxcor:
            title: Starting pixel in detector x-axis direction
            type: integer
            fits_keyword: DETXCOR
            blend_table: True
          detycor:
            title: Starting pixel in detector y-axis direction
            type: integer
            fits_keyword: DETYCOR
            blend_table: True
          detxsiz:
            title: Number of pixels in detector x-axis direction
            type: integer
            fits_keyword: DETXSIZ
            blend_table: True
          detysiz:
            title: Number of pixels in detector y-axis direction
            type: integer
            fits_keyword: DETYSIZ
            blend_table: True